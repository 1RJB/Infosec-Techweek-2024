{% extends 'base.html' %}

{% block body %}
    <h1>List of the most popular programming languages</h1>
    {% if admin %}
        <p>You are admin so here is the flag NYP{3srF_a11A3K}</p>
    {% endif %}
    <form>
        <label for="search">Search:</label>
        <input type="text" id="search" name="search">
        <button>Search!</button>
    </form>
    <div id="container">
        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; margin: auto;">
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='js.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>Javascript</h4>
            </div>
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='python.webp') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>Python</h4>
            </div>
        </div>
        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; margin: auto;">
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='ts.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>Typescript</h4>
            </div>
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='java.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>Java</h4>
            </div>
        </div>
        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; margin: auto;">
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='c#.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>C#</h4>
            </div>
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='cpp.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>C++</h4>
            </div>
        </div>
        <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; margin: auto;">
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='c.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>C</h4>
            </div>
            <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <img src="{{ url_for('static', filename='php.png') }}" style="max-width: 100%; max-height: 100%;" />
                <h4>PHP</h4>
            </div>
        </div>
    </div>
    <script>
        const languages = [
            ['Javascript', 'js.png'],
            ['Python', 'python.webp'],
            ['Typescript', 'ts.png'],
            ['Java', 'java.png'],
            ['C#', 'c#.png'],
            ['C++', 'cpp.png'],
            ['C', 'c.png'],
            ['PHP', 'php.png'],
        ];
        const params = new URLSearchParams(window.location.search);
        const search = params.get("search");

        if(search !== null) {
            let index = -1;
            for(let i=0; i<languages.length; ++i) {
                if(search.trim().toLowerCase() == languages[i][0].toLowerCase()) {
                    index = i;
                    break;
                }
            }
            let container = document.getElementById("container");
            container.innerHTML = `<p>Searching for ${search}:</p>`;
            if(index != -1) {
                container.innerHTML += `\
                    <div style="display: flex; align-items: center; justify-content: center; gap: 2rem; margin: auto;">\
                        <div style="width: 40%; display: flex; flex-direction: column; justify-content: center; align-items: center;">\
                        <img src="/static/${languages[index][1]}") }}" style="max-width: 100%; max-height: 100%;" />\
                        <h4>${languages[index][0]}</h4>\
                    </div>`;
            }
            else {
                container.innerHTML += "<p>We found no results.</p>";
            }
        }
    </script>
{% endblock %}